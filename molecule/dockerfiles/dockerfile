FROM fnndsc/ubuntu-python3

ARG source_branch=3.10_7.3.0_test_jenkins

# Update aptitude
RUN apt-get update

RUN apt-get install -y git

RUN apt-get install -y curl

RUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py && python2.7 get-pip.py && apt-get install python-dev && pip2.7 install pipenv && python2.7 -m pip install psutil

# Clone the corresponding branch of wazuh-puppet
RUN cd / && git clone -b $source_branch https://github.com/wazuh/wazuh-ansible.git

RUN apt-get -y install ssh && apt-get -y update